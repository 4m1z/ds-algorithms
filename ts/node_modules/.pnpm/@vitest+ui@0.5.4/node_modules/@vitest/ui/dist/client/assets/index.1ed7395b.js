var Ue=Object.defineProperty,Ge=Object.defineProperties;var We=Object.getOwnPropertyDescriptors;var be=Object.getOwnPropertySymbols;var He=Object.prototype.hasOwnProperty,Ke=Object.prototype.propertyIsEnumerable;var ue=(e,t,n)=>t in e?Ue(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,A=(e,t)=>{for(var n in t||(t={}))He.call(t,n)&&ue(e,n,t[n]);if(be)for(var n of be(t))Ke.call(t,n)&&ue(e,n,t[n]);return e},U=(e,t)=>Ge(e,We(t));var ee=(e,t,n)=>(ue(e,typeof t!="symbol"?t+"":t,n),n);import{c as Ye,s as Xe,p as qe,u as Je,t as Se,r as R,a as Ie,b as h,w as X,d as pe,e as T,f as s,o as u,g as _,h as a,n as S,i as k,j as I,F as N,k as j,l as te,m as W,q as Qe,C as Ze,v as et,x as tt,y as Te,z as M,A as K,B as q,D as nt,E as st,G as x,H as ot,I as lt,J as it,K as at,L as rt,M as ct,P as ye,N as J,O as L,Q as F,S as ut,R as xe,T as Fe,U as dt,V as pt,W as ze,X as Ne,Y as ft,Z as vt,_ as ke,$ as mt,a0 as ht,a1 as _t,a2 as gt,a3 as bt,a4 as yt,a5 as G,a6 as $e,a7 as xt,a8 as kt,a9 as $t,aa as wt,ab as Ct,ac as Ve}from"./vendor.b51d1379.js";const Mt=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))l(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const r of o.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&l(r)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerpolicy&&(o.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?o.credentials="include":i.crossorigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function l(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}};Mt();class St{constructor(){ee(this,"filesMap",new Map);ee(this,"idMap",new Map);ee(this,"taskFileMap",new WeakMap)}getFiles(t){return t?t.map(n=>this.filesMap.get(n)):Array.from(this.filesMap.values())}getFilepaths(){return Array.from(this.filesMap.keys())}getFailedFilepaths(){return this.getFiles().filter(t=>{var n;return((n=t.result)==null?void 0:n.state)==="fail"}).map(t=>t.filepath)}collectFiles(t=[]){t.forEach(n=>{this.filesMap.set(n.filepath,n),this.updateId(n)})}updateId(t){this.idMap.get(t.id)!==t&&(this.idMap.set(t.id,t),t.type==="suite"&&t.tasks.forEach(n=>{this.updateId(n)}))}updateTasks(t){for(const[n,l]of t)this.idMap.has(n)&&(this.idMap.get(n).result=l)}updateUserLog(t){const n=t.taskId&&this.idMap.get(t.taskId);n&&(n.logs||(n.logs=[]),n.logs.push(t))}}function Re(e){return e==null&&(e=[]),Array.isArray(e)?e:[e]}function Ee(e){return Re(e).flatMap(t=>t.type==="test"?[t]:t.tasks.flatMap(n=>n.type==="test"?[n]:Ee(n)))}function ve(e=[]){return Re(e).flatMap(t=>t.type==="test"?[t]:[t,...ve(t.tasks)])}function re(e){return Ee(e).some(t=>{var l,i;const n=(i=(l=t.result)==null?void 0:l.error)==null?void 0:i.message;return n==null?void 0:n.match(/Snapshot .* mismatched/)})}function It(e){const t=[e.name];let n=e;for(;(n==null?void 0:n.suite)||(n==null?void 0:n.file);)n=n.suite||n.file,(n==null?void 0:n.name)&&t.unshift(n.name);return t}function Tt(e,t={}){const{handlers:n={},autoReconnect:l=!0,reconnectInterval:i=2e3,reconnectTries:o=10,reactive:r=y=>y,WebSocketConstructor:d=globalThis.WebSocket}=t;let p=o;const c=r({ws:new d(e),state:new St,waitForConnection:w,reconnect:v});c.state.filesMap=r(c.state.filesMap),c.state.idMap=r(c.state.idMap);let b;c.rpc=Ye({onCollected(y){var g;c.state.collectFiles(y),(g=n.onCollected)==null||g.call(n,y)},onTaskUpdate(y){var g;c.state.updateTasks(y),(g=n.onTaskUpdate)==null||g.call(n,y)},onUserConsoleLog(y){c.state.updateUserLog(y)},onFinished(y){var g;(g=n.onFinished)==null||g.call(n,y)}},{post:y=>c.ws.send(y),on:y=>b=y,serialize:Xe,deserialize:qe});let f;function v(y=!1){y&&(p=o),c.ws=new WebSocket(e),m()}function m(){f=new Promise(y=>{c.ws.addEventListener("open",()=>{p=o,y()})}),c.ws.addEventListener("message",y=>{b(y.data)}),c.ws.addEventListener("close",()=>{p-=1,l&&p>0&&setTimeout(v,i)})}m();function w(){return f}return c}const Le=Je("hash-params",{initialValue:{file:"",view:null}}),P=Se(Le,"file"),B=Se(Le,"view"),Ft=location.port,zt=[location.hostname,Ft].filter(Boolean).join(":"),Nt=`${location.protocol==="https:"?"wss:":"ws:"}//${zt}/__vitest_api__`,ne=R("idle"),z=Tt(Nt,{reactive:pe,handlers:{onTaskUpdate(){ne.value="running"},onFinished(){ne.value="idle"}}}),fe=Ie({}),D=R("CONNECTING"),E=h(()=>z.state.getFiles()),C=h(()=>E.value.find(e=>e.id===P.value)),se=h(()=>ve(C.value).map(e=>(e==null?void 0:e.logs)||[]).flat()||[]),oe=e=>E.value.find(t=>t.id===e),Vt=h(()=>D.value==="OPEN"),de=h(()=>D.value==="CONNECTING");h(()=>D.value==="CLOSED");function we(e=z.state.getFiles()){return Be(e)}function Be(e){return e.forEach(t=>{delete t.result,ve(t).forEach(n=>delete n.result)}),z.rpc.rerun(e.map(t=>t.filepath))}function Rt(){if(C.value)return Be([C.value])}X(()=>z.ws,e=>{D.value="CONNECTING",e.addEventListener("open",()=>{D.value="OPEN",z.state.filesMap.clear(),z.rpc.getFiles().then(t=>z.state.collectFiles(t)),z.rpc.getConfig().then(t=>fe.value=t)}),e.addEventListener("close",()=>{setTimeout(()=>{D.value==="CONNECTING"&&(D.value="CLOSED")},1e3)})},{immediate:!0});const Et={"text-2xl":""},Lt=a("div",{"text-lg":"",op50:""}," Check your terminal or start a new server with `vitest --ui` ",-1),Bt=T({setup(e){return(t,n)=>s(Vt)?I("",!0):(u(),_("div",{key:0,fixed:"","inset-0":"",p2:"","z-10":"","select-none":"",text:"center sm",bg:"overlay","backdrop-blur-sm":"","backdrop-saturate-0":"",onClick:n[0]||(n[0]=(...l)=>s(z).reconnect&&s(z).reconnect(...l))},[a("div",{"h-full":"",flex:"~ col gap-2","items-center":"","justify-center":"",class:S(s(de)?"animate-pulse":"")},[a("div",{text:"5xl",class:S(s(de)?"i-carbon:renew animate-spin animate-reverse":"i-carbon-wifi-off")},null,2),a("div",Et,k(s(de)?"Connecting...":"Disconnected"),1),Lt],2)]))}});var H=(e,t)=>{const n=e.__vccOpts||e;for(const[l,i]of t)n[l]=i;return n};const jt={"h-full":"",class:"scrolls"},Ot={key:0,class:"scrolls scrolls-rounded task-error"},Pt={key:1,bg:"green-500/10",text:"green-500 sm",p:"x4 y2","m-2":"",rounded:""},At=T({props:{file:null},setup(e){const t=e;function n(o,r){var d;return((d=o.result)==null?void 0:d.state)!=="fail"?[]:o.type==="test"?[U(A({},o),{level:r})]:[U(A({},o),{level:r}),...o.tasks.flatMap(p=>n(p,r+1))]}const l=h(()=>{var o;return((o=t.file)==null?void 0:o.tasks.flatMap(r=>n(r,0)))||[]});function i(o){return o.startsWith(fe.value.root)?o.slice(fe.value.root.length):o}return(o,r)=>(u(),_("div",jt,[s(l).length?(u(!0),_(N,{key:0},j(s(l),d=>{var p;return u(),_("div",{key:d.id},[a("div",{bg:"red-500/10",text:"red-500 sm",p:"x3 y2","m-2":"",rounded:"",style:W({"margin-left":`${2*d.level+.5}rem`})},[te(k(d.name)+" ",1),((p=d.result)==null?void 0:p.error)?(u(),_("div",Ot,[a("pre",null,[a("b",null,k(d.result.error.name||d.result.error.nameStr),1),te(": "+k(d.result.error.message),1)]),(u(!0),_(N,null,j(d.result.error.stacks||[],(c,b)=>(u(),_("pre",{key:b,op80:""}," - "+k(i(c.file))+":"+k(c.line)+":"+k(c.column),1))),128))])):I("",!0)],4)])}),128)):(u(),_("div",Pt," All tests passed in this file "))]))}});var Dt=H(At,[["__scopeId","data-v-3955269f"]]);const Ut={key:0,"h-full":"",class:"scrolls",flex:"","flex-col":""},Gt={border:"b base","p-4":""},Wt=["textContent"],Ht={key:1,p6:""},Kt=te(" Log something in your test and it would print here. (e.g. "),Yt=a("pre",{inline:""},"console.log(foo)",-1),Xt=te(") "),qt=[Kt,Yt,Xt],Jt=T({setup(e){function t(i){return new Date(i).toLocaleTimeString()}function n(i){return i.trim()}function l(i){const o=i&&z.state.idMap.get(i);return o?It(o).slice(1).join(" > "):"-"}return(i,o)=>{var r;return((r=s(se))==null?void 0:r.length)?(u(),_("div",Ut,[(u(!0),_(N,null,j(s(se),d=>(u(),_("div",{key:d.taskId,"font-mono":""},[a("div",Gt,[a("div",{"text-xs":"","mb-1":"",class:S(d.type==="stderr"?"text-red-600 dark:text-red-300":"op30")},k(t(d.time))+" | "+k(l(d.taskId))+" | "+k(d.type),3),a("pre",{textContent:k(n(d.content))},null,8,Wt)])]))),128))])):(u(),_("p",Ht,qt))}}});function Qt(e,t,n={}){const l=Ze.fromTextArea(e.value,A({theme:"vars"},n));let i=!1;return l.on("change",()=>{if(i){i=!1;return}t.value=l.getValue()}),X(t,o=>{if(o!==l.getValue()){i=!0;const r=l.listSelections();l.replaceRange(o,l.posFromIndex(0),l.posFromIndex(1/0)),l.setSelections(r)}},{immediate:!0}),Qe(l)}const Zt={relative:"","font-mono":"","text-sm":"",class:"scrolls"},je=T({props:{modelValue:null,mode:null,readOnly:{type:Boolean}},emits:["update:modelValue","save"],setup(e,{expose:t,emit:n}){const l=e,i=et(),o={js:"javascript",mjs:"javascript",cjs:"javascript",ts:{name:"javascript",typescript:!0},mts:{name:"javascript",typescript:!0},cts:{name:"javascript",typescript:!0},jsx:{name:"javascript",jsx:!0},tsx:{name:"javascript",typescript:!0,jsx:!0}},r=R(),d=tt(l,"modelValue",n,{passive:!0}),p=Ie();return t({cm:p}),Te(async()=>{p.value=Qt(r,d,U(A(A({},l),i),{mode:o[l.mode||""]||l.mode,readOnly:l.readOnly?"nocursor":void 0,extraKeys:{"Cmd-S":function(c){n("save",c.getValue())},"Ctrl-S":function(c){n("save",c.getValue())}}})),p.value.setSize("100%","100%"),p.value.clearHistory(),setTimeout(()=>p.value.refresh(),100)}),(c,b)=>(u(),_("div",Zt,[a("textarea",{ref_key:"el",ref:r},null,512)]))}}),en=T({props:{file:null},setup(e){const t=e,n=R("");X(()=>t.file,async()=>{var f;if(!t.file||!((f=t.file)==null?void 0:f.filepath)){n.value="";return}n.value=await z.rpc.readFile(t.file.filepath)},{immediate:!0});const l=h(()=>{var f,v;return((v=(f=t.file)==null?void 0:f.filepath)==null?void 0:v.split(/\./g).pop())||"js"}),i=R(),o=h(()=>{var f;return(f=i.value)==null?void 0:f.cm}),r=h(()=>{var f;return((f=t.file)==null?void 0:f.tasks.filter(v=>{var m;return((m=v.result)==null?void 0:m.state)==="fail"}))||[]}),d=R(!1),p=[],c=[];async function b(f){d.value=!0,await z.rpc.writeFile(t.file.filepath,f)}return X([o,r],()=>{!o.value||setTimeout(()=>{var f;p.forEach(v=>v.clear()),c.forEach(v=>{var m;return(m=o.value)==null?void 0:m.removeLineClass(v,"wrap")}),p.length=0,c.length=0,r.value.forEach(v=>{var y;const m=(y=v.result)==null?void 0:y.error,w=((m==null?void 0:m.stacks)||[]).filter(g=>{var $;return g.file&&g.file===(($=t.file)==null?void 0:$.filepath)});if(w.length){const g=w[0].sourcePos||w[0],$=document.createElement("pre");$.className="c-red-600 dark:c-red-400",$.textContent=`${" ".repeat(g.column)}^ ${m==null?void 0:m.nameStr}: ${m==null?void 0:m.message}`,c.push(o.value.addLineClass(g.line-1,"wrap","bg-red-500/10")),p.push(o.value.addLineWidget(g.line-1,$))}}),d.value||(f=o.value)==null||f.clearHistory()},100)},{flush:"post"}),(f,v)=>{const m=je;return u(),M(m,K({ref_key:"editor",ref:i,modelValue:n.value,"onUpdate:modelValue":v[0]||(v[0]=w=>n.value=w),"h-full":""},{lineNumbers:!0},{mode:s(l),onSave:b}),null,16,["modelValue","mode"])}}}),tn=T({props:{modelValue:{type:Boolean,default:!1},direction:{default:"bottom"}},emits:["update:modelValue"],setup(e){const t=e,n=h(()=>{switch(t.direction){case"bottom":return"bottom-0 left-0 right-0 border-t";case"top":return"top-0 left-0 right-0 border-b";case"left":return"bottom-0 left-0 top-0 border-r";case"right":return"bottom-0 top-0 right-0 border-l";default:return""}}),l=h(()=>{switch(t.direction){case"bottom":return"translateY(100%)";case"top":return"translateY(-100%)";case"left":return"translateX(-100%)";case"right":return"translateX(100%)";default:return""}});return(i,o)=>(u(),_("div",{class:S(["fixed inset-0 z-40",e.modelValue?"":"pointer-events-none"])},[a("div",{class:S(["bg-base inset-0 absolute transition-opacity duration-500 ease-out",e.modelValue?"opacity-50":"opacity-0"]),onClick:o[0]||(o[0]=r=>i.$emit("update:modelValue",!1))},null,2),a("div",{class:S(["bg-base border-base absolute transition-all duration-200 ease-out",[s(n),"scrolls"]]),style:W(e.modelValue?{}:{transform:s(l)})},[q(i.$slots,"default")],6)],2))}}),nn=["aria-label","opacity","hover"],Q=T({props:{icon:null,title:null,disabled:{type:Boolean}},setup(e){return(t,n)=>(u(),_("button",{"aria-label":e.title,role:"button",opacity:e.disabled?10:70,rounded:"",hover:e.disabled?"":"bg-active op100",class:"w-1.4em h-1.4em flex"},[q(t.$slots,"default",{},()=>[a("div",{class:S(e.icon),ma:""},null,2)])],8,nn))}}),sn={"w-350":"","max-w-screen":"","h-full":"",flex:"","flex-col":""},on={"p-4":"",relative:""},ln=a("p",null,"Module Info",-1),an={op50:"","font-mono":"","text-sm":""},rn={key:0,"p-5":""},cn={grid:"~ cols-2 rows-[min-content_auto]","overflow-hidden":"","flex-auto":""},un=a("div",{p:"x3 y-1","bg-overlay":"",border:"base b t r"}," Source ",-1),dn=a("div",{p:"x3 y-1","bg-overlay":"",border:"base b t"}," Transformed ",-1),pn={key:0},fn={p:"x3 y-1","bg-overlay":"",border:"base b t"},vn=T({props:{id:null},emits:["close"],setup(e,{emit:t}){const n=e,l=nt(()=>z.rpc.getTransformResult(n.id)),i=h(()=>{var p;return((p=n.id)==null?void 0:p.split(/\./g).pop())||"js"}),o=h(()=>{var p,c;return((c=(p=l.value)==null?void 0:p.source)==null?void 0:c.trim())||""}),r=h(()=>{var p,c;return((c=(p=l.value)==null?void 0:p.code)==null?void 0:c.replace(/\/\/# sourceMappingURL=.*\n/,"").trim())||""}),d=h(()=>{var p,c,b,f,v;return{mappings:(b=(c=(p=l.value)==null?void 0:p.map)==null?void 0:c.mappings)!=null?b:"",version:(v=(f=l.value)==null?void 0:f.map)==null?void 0:v.version}});return st("Escape",()=>{t("close")}),(p,c)=>{const b=Q,f=je;return u(),_("div",sn,[a("div",on,[ln,a("p",an,k(e.id),1),x(b,{icon:"i-carbon-close",absolute:"","top-5px":"","right-5px":"","text-2xl":"",onClick:c[0]||(c[0]=v=>t("close"))})]),s(l)?(u(),_(N,{key:1},[a("div",cn,[un,dn,x(f,K({"h-full":"","model-value":s(o),"read-only":""},{lineNumbers:!0},{mode:s(i)}),null,16,["model-value","mode"]),x(f,K({"h-full":"","model-value":s(r),"read-only":""},{lineNumbers:!0},{mode:s(i)}),null,16,["model-value","mode"])]),s(d).mappings!==""?(u(),_("div",pn,[a("div",fn," Source map (v"+k(s(d).version)+") ",1),x(f,K({"model-value":s(d).mappings,"read-only":""},{lineNumbers:!0},{mode:s(i)}),null,16,["model-value","mode"])])):I("",!0)],64)):(u(),_("div",rn," No transform result found for this module. "))])}}});const mn={"h-full":"","min-h-75":"","flex-1":"",overflow:"hidden"},hn={flex:"","items-center":"","gap-4":"","px-3":"","py-2":""},_n=["id","checked","onChange"],gn=["for"],bn=a("div",{"flex-auto":""},null,-1),yn=T({props:{graph:null},setup(e){const t=e,{graph:n}=ot(t),l=R(),i=R(!1),o=R(),r=R();lt(()=>{i.value===!1&&setTimeout(()=>o.value=void 0,300)},{flush:"post"}),Te(()=>{c()}),it(()=>{var f;(f=r.value)==null||f.shutdown()}),X(n,c);function d(f,v){var m;(m=r.value)==null||m.filterNodesByType(v,f)}function p(f){o.value=f,i.value=!0}function c(){var f;(f=r.value)==null||f.shutdown(),!(!n.value||!l.value)&&(r.value=new at(l.value,n.value,rt({nodeRadius:10,autoResize:!0,simulation:{alphas:{initialize:1,resize:({newHeight:v,newWidth:m})=>v===0&&m===0?0:.25},forces:{collision:{radiusMultiplier:10},link:{length:240}}},marker:ct.Arrow(2),modifiers:{node:b},positionInitializer:n.value.nodes.length>1?ye.Randomized:ye.Centered,zoom:{min:.5,max:2}})))}function b(f){const v=g=>g.button===0;let m=0,w=0,y=0;f.on("pointerdown",(g,$)=>{$.type!=="external"&&(!$.x||!$.y||!v(g)||(m=$.x,w=$.y,y=Date.now()))}).on("pointerup",(g,$)=>{if($.type==="external"||!$.x||!$.y||!v(g)||Date.now()-y>500)return;const V=$.x-m,Z=$.y-w;V**2+Z**2<100&&p($.id)})}return(f,v)=>{var $;const m=Q,w=vn,y=tn,g=J("tooltip");return u(),_("div",mn,[a("div",null,[a("div",hn,[(u(!0),_(N,null,j(($=r.value)==null?void 0:$.nodeTypes.sort(),V=>{var Z;return u(),_("div",{key:V,flex:"~ gap-1","items-center":"","select-none":""},[a("input",{id:`type-${V}`,type:"checkbox",checked:(Z=r.value)==null?void 0:Z.nodeTypeFilter.includes(V),onChange:De=>d(V,De.target.checked)},null,40,_n),a("label",{"font-light":"","text-sm":"","ws-nowrap":"","overflow-hidden":"",capitalize:"",truncate:"",for:`type-${V}`,"border-b-2":"",style:W({"border-color":`var(--color-node-${V})`})},k(V)+" Modules",13,gn)])}),128)),bn,a("div",null,[L(x(m,{icon:"i-carbon-reset",onClick:c},null,512),[[g,"Reset",void 0,{bottom:!0}]])])])]),a("div",{ref_key:"el",ref:l},null,512),x(y,{modelValue:i.value,"onUpdate:modelValue":v[1]||(v[1]=V=>i.value=V),direction:"right"},{default:F(()=>[o.value?(u(),M(ut,{key:0},{default:F(()=>[x(w,{id:o.value,onClose:v[0]||(v[0]=V=>i.value=!1)},null,8,["id"])]),_:1})):I("",!0)]),_:1},8,["modelValue"])])}}}),xn={key:0,"text-green-500":"","flex-shrink-0":"","i-carbon:checkmark":""},kn={key:1,"text-red-500":"","flex-shrink-0":"","i-carbon:compare":""},$n={key:2,"text-red-500":"","flex-shrink-0":"","i-carbon:close":""},wn={key:3,"text-gray-500":"","flex-shrink-0":"","i-carbon:document-blank":""},Cn={key:4,"text-gray-500":"","flex-shrink-0":"","i-carbon:redo":"","rotate-90":""},Mn={key:5,"text-yellow-500":"","flex-shrink-0":"","i-carbon:circle-dash":"","animate-spin":""},me=T({props:{task:null},setup(e){return(t,n)=>{var i,o,r;const l=J("tooltip");return((i=e.task.result)==null?void 0:i.state)==="pass"?(u(),_("div",xn)):s(re)(e.task)?L((u(),_("div",kn,null,512)),[[l,"Contains failed snapshot",void 0,{right:!0}]]):((o=e.task.result)==null?void 0:o.state)==="fail"?(u(),_("div",$n)):e.task.mode==="todo"?L((u(),_("div",wn,null,512)),[[l,"Todo",void 0,{right:!0}]]):e.task.mode==="skip"||((r=e.task.result)==null?void 0:r.state)==="skip"?L((u(),_("div",Cn,null,512)),[[l,"Skipped",void 0,{right:!0}]]):(u(),_("div",Mn))}}});function Sn(e){let t=e;return t.includes("/node_modules/")?t=t.split(/\/node_modules\//g).pop().split(/\//g).shift():t=t.split(/\//g).pop(),Fe({color:"var(--color-node-external)",label:{color:"var(--color-node-external)",fontSize:"0.875rem",text:t},isFocused:!1,id:e,type:"external"})}function In(e,t){return Fe({color:t?"var(--color-node-root)":"var(--color-node-inline)",label:{color:t?"var(--color-node-root)":"var(--color-node-inline)",fontSize:"0.875rem",text:e.split(/\//g).pop()},isFocused:!1,id:e,type:"inline"})}function Tn(e,t){var d,p;if(!e)return xe({});const n=(d=e.externalized.map(c=>Sn(c)))!=null?d:[],l=(p=e.inlined.map(c=>In(c,c===t)))!=null?p:[],i=[...n,...l],o=Object.fromEntries(i.map(c=>[c.id,c])),r=Object.entries(e.graph).flatMap(([c,b])=>b.map(f=>{const v=o[c],m=o[f];if(!(v===void 0||m===void 0))return dt({source:v,target:m,color:"var(--color-link)",label:!1})}).filter(f=>f!==void 0));return xe({nodes:i,links:r})}const Fn={key:0,flex:"","flex-col":"","h-full":"","max-h-full":"","overflow-hidden":""},zn={p:"2","h-10":"",flex:"~ gap-2","items-center":"","bg-header":"",border:"b base"},Nn={"flex-1":"","font-light":"","op-50":"","ws-nowrap":"",truncate:"","text-sm":""},Vn={class:"flex text-lg"},Rn={flex:"~","items-center":"","bg-header":"",border:"b-2 base","text-sm":"","h-38px":""},En={flex:"","flex-col":"","flex-1":"",overflow:"hidden"},Ln=T({setup(e){const t=R({externalized:[],graph:{},inlined:[]}),n=R({nodes:[],links:[]});pt(C,async(o,r)=>{o&&o.filepath!==(r==null?void 0:r.filepath)&&(t.value=await z.rpc.getModuleGraph(o.filepath),n.value=Tn(t.value,o.filepath))},{debounce:100,immediate:!0});const l=()=>{var r;const o=(r=C.value)==null?void 0:r.filepath;o&&fetch(`/__open-in-editor?file=${encodeURIComponent(o)}`)},i=o=>{B.value=o};return(o,r)=>{var w,y,g,$;const d=me,p=Q,c=yn,b=en,f=Jt,v=Dt,m=J("tooltip");return s(C)?(u(),_("div",Fn,[a("div",null,[a("div",zn,[x(d,{task:s(C)},null,8,["task"]),a("div",Nn,k((w=s(C))==null?void 0:w.filepath),1),a("div",Vn,[L(x(p,{icon:"i-carbon-launch",disabled:!((y=s(C))==null?void 0:y.filepath),onClick:l},null,8,["disabled"]),[[m,"Open in editor",void 0,{bottom:!0}]])])]),a("div",Rn,[a("button",{"tab-button":"",class:S({"tab-button-active":s(B)==null}),onClick:r[0]||(r[0]=V=>i(null))}," Report ",2),a("button",{"tab-button":"",class:S({"tab-button-active":s(B)==="graph"}),onClick:r[1]||(r[1]=V=>i("graph"))}," Module Graph ",2),a("button",{"tab-button":"",class:S({"tab-button-active":s(B)==="editor"}),onClick:r[2]||(r[2]=V=>i("editor"))}," Code ",2),a("button",{"tab-button":"",class:S({"tab-button-active":s(B)==="console",op20:s(B)!=="console"&&((g=s(se))==null?void 0:g.length)===0}),onClick:r[3]||(r[3]=V=>i("console"))}," Console ("+k((($=s(se))==null?void 0:$.length)||0)+") ",3)])]),a("div",En,[L(x(c,{graph:n.value},null,8,["graph"]),[[ze,s(B)==="graph"]]),s(B)==="editor"?(u(),M(b,{key:s(C).filepath,file:s(C)},null,8,["file"])):s(B)==="console"?(u(),M(f,{key:1,file:s(C)},null,8,["file"])):s(B)?I("",!0):(u(),M(v,{key:2,file:s(C)},null,8,["file"]))])])):I("",!0)}}});const Bn=["open"],jn=a("div",{"flex-1":"","h-1px":"",border:"base b",op80:""},null,-1),On=a("div",{"flex-1":"","h-1px":"",border:"base b",op80:""},null,-1),Pn=T({props:{color:null},setup(e){const t=R(!0);return(n,l)=>(u(),_("div",{open:t.value,class:"details-panel",onToggle:l[0]||(l[0]=i=>t.value=i.target.open)},[a("div",{p:"y1","text-sm":"","bg-base":"","items-center":"","z-5":"","gap-2":"",class:S(e.color),"w-full":"",flex:"","select-none":"",sticky:"",top:"-1"},[jn,q(n.$slots,"summary",{open:t.value}),On],2),q(n.$slots,"default")],40,Bn))}}),An={key:0,flex:"~ row","items-center":"",p:"x-2 y-1","border-rounded":"","cursor-pointer":"",hover:"bg-active"},Dn=["text"],Un={"text-sm":"",truncate:"","font-light":""},Gn={key:0,text:"xs",op20:"",style:{"white-space":"nowrap"}},Wn=T({props:{task:null},setup(e){const t=e,n=h(()=>{const{result:l}=t.task;return l&&Math.round(l.duration||0)});return(l,i)=>{var r,d;const o=me;return e.task?(u(),_("div",An,[x(o,{task:e.task,"mr-2":""},null,8,["task"]),a("div",{flex:"","items-end":"","gap-2":"",text:((d=(r=e.task)==null?void 0:r.result)==null?void 0:d.state)==="fail"?"red-500":""},[a("span",Un,k(e.task.name),1),typeof s(n)=="number"?(u(),_("span",Gn,k(s(n)>0?s(n):"< 1")+"ms ",1)):I("",!0)],8,Dn)])):I("",!0)}}}),Hn={key:1},Kn={inheritAttrs:!1},Yn=T(U(A({},Kn),{props:{task:null,indent:{default:0},nested:{type:Boolean,default:!1},search:null,onItemClick:null},setup(e){return(t,n)=>{const l=Wn,i=Ne("TaskTree",!0);return u(),_(N,null,[!e.search||e.task.name.match(e.search)?(u(),M(l,K({key:0},t.$attrs,{task:e.task,style:{paddingLeft:`${e.indent*.75+1}rem`},onClick:n[0]||(n[0]=o=>e.onItemClick&&e.onItemClick(e.task))}),null,16,["task","style"])):I("",!0),e.nested&&e.task.type==="suite"&&e.task.tasks.length?(u(),_("div",Hn,[(u(!0),_(N,null,j(e.task.tasks,o=>(u(),M(i,{key:o.id,task:o,nested:e.nested,indent:e.indent+1,search:e.search,"on-item-click":e.onItemClick},null,8,["task","nested","indent","search","on-item-click"]))),128))])):I("",!0)],64)}}})),Xn={h:"full",flex:"~ col"},qn={p:"2","h-10":"",flex:"~ gap-2","items-center":"","bg-header":"",border:"b base"},Jn={p:"x3 y2",flex:"~ gap-2","items-center":"","bg-header":"",border:"b-2 base"},Qn=a("div",{"i-carbon:search":"","flex-shrink-0":""},null,-1),Zn=["op"],es={class:"scrolls","flex-auto":"","py-1":""},ts={"text-red5":""},ns={"text-yellow5":""},ss={"text-green5":""},os={"text-purple5:50":""},ls={key:2,flex:"~ col","items-center":"",p:"x4 y4","font-light":""},is=a("div",{op30:""}," No matched test ",-1),as={inheritAttrs:!1},Oe=T(U(A({},as),{props:{tasks:null,indent:{default:0},nested:{type:Boolean,default:!1},groupByType:{type:Boolean,default:!1},onItemClick:null},emits:["run"],setup(e,{emit:t}){const n=e,l=R(""),i=h(()=>l.value.trim()!==""),o=h(()=>l.value.trim()?n.tasks.filter(v=>v.name.match(l.value)):n.tasks),r=h(()=>i.value?o.value.map(v=>oe(v.id)).filter(Boolean):[]),d=h(()=>o.value.filter(v=>{var m;return((m=v.result)==null?void 0:m.state)==="fail"})),p=h(()=>o.value.filter(v=>{var m;return((m=v.result)==null?void 0:m.state)==="pass"})),c=h(()=>o.value.filter(v=>v.mode==="skip"||v.mode==="todo")),b=h(()=>o.value.filter(v=>!d.value.includes(v)&&!p.value.includes(v)&&!c.value.includes(v))),f=ft(b,250);return(v,m)=>{const w=Yn,y=Pn;return u(),_("div",Xn,[a("div",null,[a("div",qn,[q(v.$slots,"header",{filteredTests:s(i)?s(r):void 0})]),a("div",Jn,[Qn,L(a("input",{"onUpdate:modelValue":m[0]||(m[0]=g=>l.value=g),placeholder:"Search...",outline:"none",bg:"transparent",font:"light",text:"sm","flex-1":"","pl-1":"",op:l.value.length?"100":"50",onKeydown:[m[1]||(m[1]=ke(g=>l.value="",["esc"])),m[2]||(m[2]=ke(g=>t("run",s(i)?s(r):void 0),["enter"]))]},null,40,Zn),[[vt,l.value]])])]),a("div",es,[e.groupByType?(u(),_(N,{key:0},[s(d).length?(u(),M(y,{key:0},{summary:F(()=>[a("div",ts," FAIL ("+k(s(d).length)+") ",1)]),default:F(()=>[(u(!0),_(N,null,j(s(d),g=>(u(),M(w,{key:g.id,task:g,nested:e.nested,search:l.value,class:S(s(P)===g.id?"bg-active":""),"on-item-click":e.onItemClick},null,8,["task","nested","search","class","on-item-click"]))),128))]),_:1})):I("",!0),s(b).length||s(ne)==="running"?(u(),M(y,{key:1},{summary:F(()=>[a("div",ns," RUNNING ("+k(s(f).length)+") ",1)]),default:F(()=>[(u(!0),_(N,null,j(s(f),g=>(u(),M(w,{key:g.id,task:g,nested:e.nested,search:l.value,class:S(s(P)===g.id?"bg-active":""),"on-item-click":e.onItemClick},null,8,["task","nested","search","class","on-item-click"]))),128))]),_:1})):I("",!0),s(p).length?(u(),M(y,{key:2},{summary:F(()=>[a("div",ss," PASS ("+k(s(p).length)+") ",1)]),default:F(()=>[(u(!0),_(N,null,j(s(p),g=>(u(),M(w,{key:g.id,task:g,nested:e.nested,search:l.value,class:S(s(P)===g.id?"bg-active":""),"on-item-click":e.onItemClick},null,8,["task","nested","search","class","on-item-click"]))),128))]),_:1})):I("",!0),s(c).length?(u(),M(y,{key:3},{summary:F(()=>[a("div",os," SKIP ("+k(s(c).length)+") ",1)]),default:F(()=>[(u(!0),_(N,null,j(s(c),g=>(u(),M(w,{key:g.id,task:g,nested:e.nested,search:l.value,class:S(s(P)===g.id?"bg-active":""),"on-item-click":e.onItemClick},null,8,["task","nested","search","class","on-item-click"]))),128))]),_:1})):I("",!0)],64)):(u(!0),_(N,{key:1},j(s(o),g=>(u(),M(w,{key:g.id,task:g,nested:e.nested,search:l.value,class:S(s(P)===g.id?"bg-active":""),"on-item-click":e.onItemClick},null,8,["task","nested","search","class","on-item-click"]))),128)),s(i)&&s(o).length===0?(u(),_("div",ls,[is,a("button",{"font-light":"",op:"50 hover:100","text-sm":"",border:"~ gray-400/50 rounded",p:"x2 y0.5",m:"t2",onClick:m[3]||(m[3]=g=>l.value="")}," Clear ")])):I("",!0)])])}}})),rs={key:0,"h-full":""},cs={"font-bold":"","text-sm":"","flex-auto":"","ws-nowrap":"","overflow-hidden":"",truncate:""},us={class:"flex text-lg"},ds=T({setup(e){const t=h(()=>{var i;return(i=C.value)==null?void 0:i.name.split(/\//g).pop()}),n=h(()=>{var i,o;return((i=C.value)==null?void 0:i.tasks)&&re((o=C.value)==null?void 0:o.tasks)}),l=()=>C.value&&z.rpc.updateSnapshot(C.value);return(i,o)=>{const r=me,d=Q,p=Oe,c=J("tooltip");return s(C)?(u(),_("div",rs,[x(p,{tasks:s(C).tasks,nested:!0},{header:F(()=>[x(r,{"mx-1":"",task:s(C)},null,8,["task"]),a("span",cs,k(s(t)),1),a("div",us,[s(n)?L((u(),M(d,{key:0,icon:"i-carbon-result-old",onClick:o[0]||(o[0]=b=>l())},null,512)),[[c,`Update failed snapshot(s) of ${s(C).name}`,void 0,{bottom:!0}]]):I("",!0),L(x(d,{icon:"i-carbon-play",onClick:o[1]||(o[1]=b=>s(Rt)())},null,512),[[c,"Rerun file",void 0,{bottom:!0}]])])]),_:1},8,["tasks"])])):I("",!0)}}}),le=h(()=>E.value.filter(e=>{var t;return((t=e.result)==null?void 0:t.state)==="fail"})),ie=h(()=>E.value.filter(e=>{var t;return((t=e.result)==null?void 0:t.state)==="pass"})),he=h(()=>E.value.filter(e=>e.mode==="skip"||e.mode==="todo"));h(()=>E.value.filter(e=>!le.value.includes(e)&&!ie.value.includes(e)&&!he.value.includes(e)));h(()=>he.value.filter(e=>e.mode==="skip"));const Ce=h(()=>E.value.filter(re));h(()=>he.value.filter(e=>e.mode==="todo"));const ps=h(()=>ne.value==="idle"),ce=h(()=>_e(E.value)),fs=h(()=>ce.value.filter(e=>{var t;return((t=e.result)==null?void 0:t.state)==="fail"})),vs=h(()=>ce.value.filter(e=>{var t;return((t=e.result)==null?void 0:t.state)==="pass"})),Pe=h(()=>ce.value.filter(e=>e.mode==="skip"||e.mode==="todo"));h(()=>Pe.value.filter(e=>e.mode==="skip"));h(()=>Pe.value.filter(e=>e.mode==="todo"));h(()=>fs.value.length+vs.value.length);const ms=h(()=>{const e=_e(ce.value).reduce((t,n)=>{var l;return((l=n.result)==null?void 0:l.duration)&&(t+=n.result.duration),t},0);return e>1e3?`${(e/1e3).toFixed(2)}s`:`${Math.round(e)}ms`});function hs(e){return e=e||[],Array.isArray(e)?e:[e]}function _e(e){return hs(e).flatMap(t=>t.type==="test"?[t]:t.tasks.flatMap(n=>n.type==="test"?[n]:_e(n)))}const O=e=>(mt("data-v-09144456"),e=e(),ht(),e),_s={grid:"~ cols-[min-content_1fr_min-content]","items-center":"",gap:"x-2 y-3",p:"x4",relative:"","font-light":"","w-80":"",op80:""},gs=O(()=>a("div",{"i-carbon-document":""},null,-1)),bs=O(()=>a("div",null,"Files",-1)),ys={class:"number"},xs=O(()=>a("div",{"i-carbon-checkmark":""},null,-1)),ks=O(()=>a("div",null,"Pass",-1)),$s={class:"number"},ws=O(()=>a("div",{"i-carbon-close":""},null,-1)),Cs=O(()=>a("div",null," Fail ",-1)),Ms={class:"number","text-red5":""},Ss=O(()=>a("div",{"i-carbon-compare":""},null,-1)),Is=O(()=>a("div",null," Snapshot Fail ",-1)),Ts={class:"number","text-red5":""},Fs=O(()=>a("div",{"i-carbon-timer":""},null,-1)),zs=O(()=>a("div",null,"Time",-1)),Ns={class:"number"},Vs=T({setup(e){return(t,n)=>(u(),_("div",_s,[gs,bs,a("div",ys,k(s(E).length),1),s(ie).length?(u(),_(N,{key:0},[xs,ks,a("div",$s,k(s(ie).length),1)],64)):I("",!0),s(le).length?(u(),_(N,{key:1},[ws,Cs,a("div",Ms,k(s(le).length),1)],64)):I("",!0),s(Ce).length?(u(),_(N,{key:2},[Ss,Is,a("div",Ts,k(s(Ce).length),1)],64)):I("",!0),Fs,zs,a("div",Ns,k(s(ms)),1)]))}});var Rs=H(Vs,[["__scopeId","data-v-09144456"]]);const Es={},Ls={"gap-0":"",flex:"~ col gap-4","h-full":"","justify-center":"","items-center":""},Bs={"bg-header":"","rounded-lg":"",p:"y4 x2"};function js(e,t){const n=Rs;return u(),_("div",Ls,[a("div",Bs,[x(n)])])}var Os=H(Es,[["render",js]]);const Ps={},As={h:"full",flex:"~ col"},Ds=a("div",{p:"3","h-10":"",flex:"~ gap-2","items-center":"","bg-header":"",border:"b base"},[a("div",{class:"i-carbon-dashboard"}),a("span",{"pl-1":"","font-bold":"","text-sm":"","flex-auto":"","ws-nowrap":"","overflow-hidden":"",truncate:""},"Dashboard")],-1),Us={class:"scrolls","flex-auto":"","py-1":""};function Gs(e,t){const n=Os;return u(),_("div",As,[Ds,a("div",Us,[x(n)])])}var Ws=H(Ps,[["render",Gs]]),Hs="/__vitest__/favicon.svg";const ae=R(void 0),Y=R(!0);function Ks(){const e=P.value;if(e&&e.length>0){const t=oe(e);t?(ae.value=t,Y.value=!1):_t(()=>z.state.getFiles(),()=>{ae.value=oe(e),Y.value=!1})}return Y}function Me(e){Y.value=e,e&&(ae.value=void 0,P.value="")}const Ae=gt(),Ys=bt(Ae),Xs=a("img",{"w-6":"","h-6":"",src:Hs},null,-1),qs=a("span",{"font-light":"","text-sm":"","flex-1":""},"Vitest",-1),Js={class:"flex text-lg"},Qs=T({setup(e){const t=h(()=>E.value&&re(E.value)),n=()=>z.rpc.updateSnapshot();function l(o){P.value=o.id,ae.value=oe(o.id),Me(!1)}const i=h(()=>Ae.value?"light":"dark");return(o,r)=>{const d=Q,p=Oe,c=J("tooltip");return u(),M(p,{border:"r base",tasks:s(E),"on-item-click":l,"group-by-type":!0,onRun:s(we)},{header:F(({filteredTests:b})=>[Xs,qs,a("div",Js,[L(x(d,{title:"Show dashboard",class:"!animate-100ms","animate-count-1":"",icon:"i-carbon-dashboard",onClick:r[0]||(r[0]=f=>s(Me)(!0))},null,512),[[ze,!s(Y)],[c,"Dashboard",void 0,{bottom:!0}]]),s(t)?L((u(),M(d,{key:0,icon:"i-carbon-result-old",onClick:r[1]||(r[1]=f=>n())},null,512)),[[c,"Update all failed snapshot(s)",void 0,{bottom:!0}]]):I("",!0),L(x(d,{disabled:(b==null?void 0:b.length)===0,icon:"i-carbon-play",onClick:f=>s(we)(b)},null,8,["disabled","onClick"]),[[c,b?b.length===0?"No test to run (clear filter)":"Rerun filtered":"Rerun all",void 0,{bottom:!0}]]),L(x(d,{icon:"dark:i-carbon-moon i-carbon-sun",onClick:r[2]||(r[2]=f=>s(Ys)())},null,512),[[c,`Toggle to ${s(i)} mode`,void 0,{bottom:!0}]])])]),_:1},8,["tasks","onRun"])}}});const Zs={"h-3px":"",relative:"","overflow-hidden":"",class:"px-0","w-screen":""},eo=T({setup(e){const{width:t}=yt(),n=h(()=>E.value.length===0?"!bg-gray-4 !dark:bg-gray-7 in-progress":ps.value?null:"in-progress"),l=h(()=>E.value.length),i=h(()=>ie.value.length),o=h(()=>le.value.length),r=h(()=>{const b=s(l);return b>0?t.value*i.value/b:0}),d=h(()=>{const b=s(l);return b>0?t.value*o.value/b:0}),p=h(()=>s(l)-o.value-i.value),c=h(()=>{const b=s(l);return b>0?t.value*p.value/b:0});return(b,f)=>(u(),_("div",{absolute:"","t-0":"","l-0":"","r-0":"","z-index-1031":"","pointer-events-none":"","p-0":"","h-3px":"",grid:"~ auto-cols-max","justify-items-center":"","w-screen":"",class:S(s(n))},[a("div",Zs,[a("div",{absolute:"","l-0":"","t-0":"","bg-red5":"","h-3px":"",class:S(s(n)),style:W(`width: ${s(d)}px;`)}," \xA0 ",6),a("div",{absolute:"","l-0":"","t-0":"","bg-green5":"","h-3px":"",class:S(s(n)),style:W(`left: ${s(d)}px; width: ${s(r)}px;`)}," \xA0 ",6),a("div",{absolute:"","l-0":"","t-0":"","bg-yellow5":"","h-3px":"",class:S(s(n)),style:W(`left: ${s(r)+s(d)}px; width: ${s(c)}px;`)}," \xA0 ",6)])],2))}});var to=H(eo,[["__scopeId","data-v-513f7dd8"]]);const no={"h-screen":"","w-screen":"",overflow:"hidden"},so=T({setup(e){const t=Ks(),n=pe([33,67]),l=pe([33,67]),i=$e(d=>{d.forEach((p,c)=>{n[c]=p.size})},0),o=$e(d=>{d.forEach((p,c)=>{l[c]=p.size})},0),r=()=>{const d=window.innerWidth,p=Math.min(d/3,300);n[0]=100*p/d,n[1]=100-n[0],l[0]=100*p/(d-p),l[1]=100-l[0]};return(d,p)=>{const c=to,b=Qs,f=Ws,v=ds,m=Ln,w=Bt;return u(),_(N,null,[x(c),a("div",no,[x(s(G.exports.Splitpanes),{class:"pt-4px",onResized:s(i),onReady:r},{default:F(()=>[x(s(G.exports.Pane),{size:s(n)[0]},{default:F(()=>[x(b)]),_:1},8,["size"]),x(s(G.exports.Pane),{size:s(n)[1]},{default:F(()=>[x(xt,null,{default:F(()=>[s(t)?(u(),M(f,{key:"summary"})):(u(),M(s(G.exports.Splitpanes),{key:"detail",onResized:s(o)},{default:F(()=>[x(s(G.exports.Pane),{size:s(l)[0]},{default:F(()=>[x(v)]),_:1},8,["size"]),x(s(G.exports.Pane),{size:s(l)[1]},{default:F(()=>[x(m)]),_:1},8,["size"])]),_:1},8,["onResized"]))]),_:1})]),_:1},8,["size"])]),_:1},8,["onResized"])]),x(w)],64)}}}),oo=[{name:"index",path:"/",component:so,props:!0}],lo={};function io(e,t){const n=Ne("RouterView");return u(),M(n)}var ao=H(lo,[["render",io]]);const ge=kt(ao),ro=$t({history:wt("/__vitest__/"),routes:oo});ge.use(ro);ge.directive("tooltip",Ct);Ve.options.instantMove=!0;Ve.options.distance=10;ge.mount("#app");
